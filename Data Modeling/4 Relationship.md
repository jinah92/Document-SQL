# 데이터 모델링 - 관계 (Relationship)



### 개요

---

- 엔터티 간의 관련성
- 존재 관계와 행위 관계로 분류

### 관계의 종류

---

1. 존재 관계
    - 엔터티 간의 상태를 의미
    - 고객이 은행에 회원가입 ⇒ 관리점이 할당 ⇒ 할당점으로 고객을 관리
2. 행위 관계
    - 엔터티 간에 어떤 행위가 있는 것
    - 계좌를 사용해서 주문을 발주하는 관계를 생성

### 관계 차수(Cardinality)

---

- 두 개의 엔터티 간에 관계가 참여하는 수
- 종류
    1. 1대 1 관계 (완전 / 선택적)
    : 한 명의 고객은 하나의 고객등급이 부여
    2. 1대 N 관계 : 고객은 여러개의 계좌를 가질 수 있음
    3. N 대 N 관계 : 두 개 엔터티가 서로 여러 개의 관계를 가지는 것
    (한 명의 학생이 여러 개의 과목을 수강 ↔ 한 개의 과목은 여러 명의 학생이 수행)

    관계형 데이터베이스에서 Join은 카테시안 곱이 발생
    ⇒ 1대 N, N대 1로 해소해야 함

    필수적 관계 : 반드시 하나는 존재해야 하는 관계 ( | )
    선택적 관계 : 없을 수도 있는 관계 ( O )

### 식별 관계, 비식별 관계

---

- 강한 게체, 약한 개체
    1. 다른 엔터티에 존재하지 않고 독립적으로 존재
    2. 다른 엔터티와 관계를 가질 때, 다른 엔터티에게 기본키를 공유
    3. 식별 관계로 표현

    강한 개체의 기본키 값 변경 ⇒ 식별관계를 갖는 엔터티의 값도 변경

    (EX) 고객(강한 개체)과 계좌(약한 개체) 엔터티에서, 고객은 독립적으로 존재

- 비식별 관계
    1. 강한 개체의 기본키를 다른 엔터티의 일반 칼럼으로 관계를 가지는 것
    2. 점선으로 표현

    관리점 엔터티 (기본키) 지점코드는 고객 엔터티와 비식별 관계
    ⇒ 지점 코드 : 고객 엔터티의 일반 칼럼으로 참조

- 식별 관계

    : 강한 개체의 기본키를 다른 엔터티의 기본키로 공유하며 관계를 가지는 것

    : 실선 표현

### 엔터티 식별자

---

- 엔터티를 대표할 수 있는 유일성을 만족하는 속성
(회원 id, 계좌번호, 주민등록번호, 외국인등록번호, 여권번호 등)

- 주식별자 (기본키, PK)
    - 유일성과 최소성을 만족하는 키
    - 엔터티를 대표
    - 엔터티의 인스턴스를 유일하게 식별
    - 자주 변경되지 않아야 함

키의 종류
- 기본키(Primary Key) : 후보키 중에서 엔터티를 대표
- 후보키(Candidate Key) : 유일성과 최소성을 만족하는 키
- 슈퍼키(Super Key) : 유일성은 만족하나 최소성을 만족하지 않은 키
- 대체키(Alternate Key) : 여러 후보키 중에서 기본키를 선정하고 남은 키

- 식별자의 분류
    1. 대표성 여부
        - 주식별자
        : 유일성과 최소성을 만족하면서, 엔터티를 대표
        : 다른 엔터티와 참조 관계로 연결이 가능
        - 보조 식별자
        : 유일성과 최소성은 만족하나, 대표성을 만족하지 않음
    2. 생성 여부
        - 내부 식별자
        : 엔터티 내부에서 스스로 생성 (부서코드, 주문번호)
        - 외부 식별자
        : 다른 엔터티와 관계로 인해 만들어짐 (계좌 엔터티에 회원 ID)
    3. 속성의 수
        - 단일 식별자 : 하나의 속성으로 구성
        - 복합 식별자 : 두개 이상의 속성으로 구성
    4. 대체 여부
        - 본질 식별자 : 비즈니스 프로세스에서 생성
        - 인조 식별자 : 인위적으로 생성